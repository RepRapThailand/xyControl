<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>xyControl: External Memory Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">xyControl
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Quadrotor Flight Controller on AVR Basis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">External Memory Interface<div class="ingroups"><a class="el" href="group___system.html">System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Allows access to external RAM with bank-switching.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:xmem_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmem_8h.html">xmem.h</a></td></tr>
<tr class="memdesc:xmem_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">XMEM API Header. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:xmem_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmem_8c.html">xmem.c</a></td></tr>
<tr class="memdesc:xmem_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">XMEM API Implementation. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_malloc_state.html">MallocState</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">All Malloc related State.  <a href="struct_malloc_state.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga253830e5022f2aa99177acd8a0ba0bfe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga253830e5022f2aa99177acd8a0ba0bfe">MEMSWITCH</a>(x)&#160;&#160;&#160;uint8_t oldMemBank=<a class="el" href="group__xmem.html#ga575f63170f6fc636556f8d955cbd42cd">xmemGetBank</a>();if(oldMemBank!=x)<a class="el" href="group__xmem.html#ga619fa66b9f38be684f4331951fc91730">xmemSetBank</a>(x);</td></tr>
<tr class="memdesc:ga253830e5022f2aa99177acd8a0ba0bfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the bank, if needed.  <a href="#ga253830e5022f2aa99177acd8a0ba0bfe">More...</a><br/></td></tr>
<tr class="separator:ga253830e5022f2aa99177acd8a0ba0bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96199c8c5e6fbc65dd60aa67de63fd34"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga96199c8c5e6fbc65dd60aa67de63fd34">MEMSWITCHBACK</a>(x)&#160;&#160;&#160;if(oldMemBank!=x)<a class="el" href="group__xmem.html#ga619fa66b9f38be684f4331951fc91730">xmemSetBank</a>(oldMemBank);</td></tr>
<tr class="memdesc:ga96199c8c5e6fbc65dd60aa67de63fd34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch back to the last bank, if needed.  <a href="#ga96199c8c5e6fbc65dd60aa67de63fd34">More...</a><br/></td></tr>
<tr class="separator:ga96199c8c5e6fbc65dd60aa67de63fd34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ed280cb3dd0a4a03aeda6aaccc180d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3">MEMBANKS</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ga1ed280cb3dd0a4a03aeda6aaccc180d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Available Memory Banks.  <a href="#ga1ed280cb3dd0a4a03aeda6aaccc180d3">More...</a><br/></td></tr>
<tr class="separator:ga1ed280cb3dd0a4a03aeda6aaccc180d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b1167d0078b33af8ec17ededaebe0cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga6b1167d0078b33af8ec17ededaebe0cb">BANK_GENERIC</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga6b1167d0078b33af8ec17ededaebe0cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic Memory Bank.  <a href="#ga6b1167d0078b33af8ec17ededaebe0cb">More...</a><br/></td></tr>
<tr class="separator:ga6b1167d0078b33af8ec17ededaebe0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5177871b2303418ed492a18405273f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gaa5177871b2303418ed492a18405273f9">BANK_SERIAL</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaa5177871b2303418ed492a18405273f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bank for serial buffers.  <a href="#gaa5177871b2303418ed492a18405273f9">More...</a><br/></td></tr>
<tr class="separator:gaa5177871b2303418ed492a18405273f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabeec1986c81588dde8863b7936028fc9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gabeec1986c81588dde8863b7936028fc9">BANK0PORT</a>&#160;&#160;&#160;PORTG</td></tr>
<tr class="memdesc:gabeec1986c81588dde8863b7936028fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">First Bank Selection Port.  <a href="#gabeec1986c81588dde8863b7936028fc9">More...</a><br/></td></tr>
<tr class="separator:gabeec1986c81588dde8863b7936028fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafba0bbf9336cfc754622a5e9b3d12d80"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gafba0bbf9336cfc754622a5e9b3d12d80">BANK0DDR</a>&#160;&#160;&#160;DDRG</td></tr>
<tr class="memdesc:gafba0bbf9336cfc754622a5e9b3d12d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">First Bank Selection Data Direction Register.  <a href="#gafba0bbf9336cfc754622a5e9b3d12d80">More...</a><br/></td></tr>
<tr class="separator:gafba0bbf9336cfc754622a5e9b3d12d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa176e9b2752f764cd7e7d9fd49d46af8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gaa176e9b2752f764cd7e7d9fd49d46af8">BANK0PIN</a>&#160;&#160;&#160;PG3</td></tr>
<tr class="memdesc:gaa176e9b2752f764cd7e7d9fd49d46af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">First Bank Selection Pin.  <a href="#gaa176e9b2752f764cd7e7d9fd49d46af8">More...</a><br/></td></tr>
<tr class="separator:gaa176e9b2752f764cd7e7d9fd49d46af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b3ee7126196f6e939989eae097c3ac4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga8b3ee7126196f6e939989eae097c3ac4">BANK1PORT</a>&#160;&#160;&#160;PORTG</td></tr>
<tr class="memdesc:ga8b3ee7126196f6e939989eae097c3ac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second Bank Selection Port.  <a href="#ga8b3ee7126196f6e939989eae097c3ac4">More...</a><br/></td></tr>
<tr class="separator:ga8b3ee7126196f6e939989eae097c3ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada13cb9312072b48628763a6e1fd50d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gada13cb9312072b48628763a6e1fd50d3">BANK1DDR</a>&#160;&#160;&#160;DDRG</td></tr>
<tr class="memdesc:gada13cb9312072b48628763a6e1fd50d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second Bank Selection Data Direction Register.  <a href="#gada13cb9312072b48628763a6e1fd50d3">More...</a><br/></td></tr>
<tr class="separator:gada13cb9312072b48628763a6e1fd50d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfebedc2067e3c52e6ae1f627afcc1e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gacfebedc2067e3c52e6ae1f627afcc1e1">BANK1PIN</a>&#160;&#160;&#160;PG4</td></tr>
<tr class="memdesc:gacfebedc2067e3c52e6ae1f627afcc1e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second Bank Selection Pin.  <a href="#gacfebedc2067e3c52e6ae1f627afcc1e1">More...</a><br/></td></tr>
<tr class="separator:gacfebedc2067e3c52e6ae1f627afcc1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad35afb0251524c201c2d60f3d035af32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gad35afb0251524c201c2d60f3d035af32">BANK2PORT</a>&#160;&#160;&#160;PORTL</td></tr>
<tr class="memdesc:gad35afb0251524c201c2d60f3d035af32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Third Bank Selection Port.  <a href="#gad35afb0251524c201c2d60f3d035af32">More...</a><br/></td></tr>
<tr class="separator:gad35afb0251524c201c2d60f3d035af32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62f56230c5f5f7220c44ab1c93d677ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga62f56230c5f5f7220c44ab1c93d677ab">BANK2DDR</a>&#160;&#160;&#160;DDRL</td></tr>
<tr class="memdesc:ga62f56230c5f5f7220c44ab1c93d677ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Third Bank Selection Data Direction Register.  <a href="#ga62f56230c5f5f7220c44ab1c93d677ab">More...</a><br/></td></tr>
<tr class="separator:ga62f56230c5f5f7220c44ab1c93d677ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74c95f6ccdb5e482e97a5af53ed74229"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga74c95f6ccdb5e482e97a5af53ed74229">BANK2PIN</a>&#160;&#160;&#160;PL5</td></tr>
<tr class="memdesc:ga74c95f6ccdb5e482e97a5af53ed74229"><td class="mdescLeft">&#160;</td><td class="mdescRight">Third Bank Selection Pin.  <a href="#ga74c95f6ccdb5e482e97a5af53ed74229">More...</a><br/></td></tr>
<tr class="separator:ga74c95f6ccdb5e482e97a5af53ed74229"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9744de3b2aca21a564b151e770ed7384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga9744de3b2aca21a564b151e770ed7384">xmemInit</a> (void)</td></tr>
<tr class="memdesc:ga9744de3b2aca21a564b151e770ed7384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the External Memory Interface.  <a href="#ga9744de3b2aca21a564b151e770ed7384">More...</a><br/></td></tr>
<tr class="separator:ga9744de3b2aca21a564b151e770ed7384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga619fa66b9f38be684f4331951fc91730"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga619fa66b9f38be684f4331951fc91730">xmemSetBank</a> (uint8_t bank)</td></tr>
<tr class="memdesc:ga619fa66b9f38be684f4331951fc91730"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the active memory bank.  <a href="#ga619fa66b9f38be684f4331951fc91730">More...</a><br/></td></tr>
<tr class="separator:ga619fa66b9f38be684f4331951fc91730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga575f63170f6fc636556f8d955cbd42cd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga575f63170f6fc636556f8d955cbd42cd">xmemGetBank</a> (void)</td></tr>
<tr class="memdesc:ga575f63170f6fc636556f8d955cbd42cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current memory bank.  <a href="#ga575f63170f6fc636556f8d955cbd42cd">More...</a><br/></td></tr>
<tr class="separator:ga575f63170f6fc636556f8d955cbd42cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b5d7ce361c908dce9af0faf79987124"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga1b5d7ce361c908dce9af0faf79987124">saveState</a> (uint8_t bank)</td></tr>
<tr class="memdesc:ga1b5d7ce361c908dce9af0faf79987124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the current malloc state.  <a href="#ga1b5d7ce361c908dce9af0faf79987124">More...</a><br/></td></tr>
<tr class="separator:ga1b5d7ce361c908dce9af0faf79987124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02e35ec14c8649b89dd91b5155031e2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga02e35ec14c8649b89dd91b5155031e2f">restoreState</a> (uint8_t bank)</td></tr>
<tr class="memdesc:ga02e35ec14c8649b89dd91b5155031e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the malloc state.  <a href="#ga02e35ec14c8649b89dd91b5155031e2f">More...</a><br/></td></tr>
<tr class="separator:ga02e35ec14c8649b89dd91b5155031e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_malloc_state.html">MallocState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27">states</a> [<a class="el" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3">MEMBANKS</a>]</td></tr>
<tr class="memdesc:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_malloc_state.html" title="All Malloc related State.">MallocState</a> for all Memory Banks.  <a href="#gabe6eb8575dfb63d41e3ca7fe774d1b27">More...</a><br/></td></tr>
<tr class="separator:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga4a1acf2db179d35f089bd00881d1c2eb">currentBank</a></td></tr>
<tr class="memdesc:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current active Memory Bank.  <a href="#ga4a1acf2db179d35f089bd00881d1c2eb">More...</a><br/></td></tr>
<tr class="separator:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_malloc_state.html">MallocState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27">states</a> [<a class="el" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3">MEMBANKS</a>]</td></tr>
<tr class="memdesc:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_malloc_state.html" title="All Malloc related State.">MallocState</a> for all Memory Banks.  <a href="#gabe6eb8575dfb63d41e3ca7fe774d1b27">More...</a><br/></td></tr>
<tr class="separator:gabe6eb8575dfb63d41e3ca7fe774d1b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga4a1acf2db179d35f089bd00881d1c2eb">currentBank</a> = 0</td></tr>
<tr class="memdesc:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current active Memory Bank.  <a href="#ga4a1acf2db179d35f089bd00881d1c2eb">More...</a><br/></td></tr>
<tr class="separator:ga4a1acf2db179d35f089bd00881d1c2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d18204366e8a385c441663ed41f1ae4"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#ga8d18204366e8a385c441663ed41f1ae4">__brkval</a></td></tr>
<tr class="memdesc:ga8d18204366e8a385c441663ed41f1ae4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Malloc Heap-End Pointer.  <a href="#ga8d18204366e8a385c441663ed41f1ae4">More...</a><br/></td></tr>
<tr class="separator:ga8d18204366e8a385c441663ed41f1ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc2de04ee0c18717273d0ab52fd6dc1b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmem.html#gadc2de04ee0c18717273d0ab52fd6dc1b">__flp</a></td></tr>
<tr class="memdesc:gadc2de04ee0c18717273d0ab52fd6dc1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Malloc Free List Pointer (State)  <a href="#gadc2de04ee0c18717273d0ab52fd6dc1b">More...</a><br/></td></tr>
<tr class="separator:gadc2de04ee0c18717273d0ab52fd6dc1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Allows access to external RAM with bank-switching. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gafba0bbf9336cfc754622a5e9b3d12d80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK0DDR&#160;&#160;&#160;DDRG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First Bank Selection Data Direction Register. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00059">59</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa176e9b2752f764cd7e7d9fd49d46af8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK0PIN&#160;&#160;&#160;PG3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First Bank Selection Pin. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00060">60</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="gabeec1986c81588dde8863b7936028fc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK0PORT&#160;&#160;&#160;PORTG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First Bank Selection Port. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00058">58</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="gada13cb9312072b48628763a6e1fd50d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK1DDR&#160;&#160;&#160;DDRG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Second Bank Selection Data Direction Register. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00062">62</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>.</p>

</div>
</div>
<a class="anchor" id="gacfebedc2067e3c52e6ae1f627afcc1e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK1PIN&#160;&#160;&#160;PG4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Second Bank Selection Pin. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00063">63</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8b3ee7126196f6e939989eae097c3ac4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK1PORT&#160;&#160;&#160;PORTG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Second Bank Selection Port. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00061">61</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="ga62f56230c5f5f7220c44ab1c93d677ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK2DDR&#160;&#160;&#160;DDRL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Third Bank Selection Data Direction Register. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00065">65</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>.</p>

</div>
</div>
<a class="anchor" id="ga74c95f6ccdb5e482e97a5af53ed74229"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK2PIN&#160;&#160;&#160;PL5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Third Bank Selection Pin. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00066">66</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="gad35afb0251524c201c2d60f3d035af32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK2PORT&#160;&#160;&#160;PORTL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Third Bank Selection Port. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00064">64</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6b1167d0078b33af8ec17ededaebe0cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK_GENERIC&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic Memory Bank. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00055">55</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa5177871b2303418ed492a18405273f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANK_SERIAL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bank for serial buffers. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00056">56</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="serial_8c_source.html#l00172">serialClose()</a>, <a class="el" href="serial_8c_source.html#l00245">serialGet()</a>, <a class="el" href="serial_8c_source.html#l00119">serialInit()</a>, and <a class="el" href="serial_8c_source.html#l00303">serialWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1ed280cb3dd0a4a03aeda6aaccc180d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMBANKS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Available Memory Banks. </p>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00054">54</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="ga253830e5022f2aa99177acd8a0ba0bfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMSWITCH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;uint8_t oldMemBank=<a class="el" href="group__xmem.html#ga575f63170f6fc636556f8d955cbd42cd">xmemGetBank</a>();if(oldMemBank!=x)<a class="el" href="group__xmem.html#ga619fa66b9f38be684f4331951fc91730">xmemSetBank</a>(x);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch the bank, if needed. </p>
<p>Stores the old bank in a variable oldMemBank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>New Bank </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00047">47</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="serial_8c_source.html#l00172">serialClose()</a>, <a class="el" href="serial_8c_source.html#l00245">serialGet()</a>, <a class="el" href="serial_8c_source.html#l00119">serialInit()</a>, and <a class="el" href="serial_8c_source.html#l00303">serialWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="ga96199c8c5e6fbc65dd60aa67de63fd34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMSWITCHBACK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;if(oldMemBank!=x)<a class="el" href="group__xmem.html#ga619fa66b9f38be684f4331951fc91730">xmemSetBank</a>(oldMemBank);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch back to the last bank, if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>New (current) Bank </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmem_8h_source.html#l00052">52</a> of file <a class="el" href="xmem_8h_source.html">xmem.h</a>.</p>

<p>Referenced by <a class="el" href="serial_8c_source.html#l00172">serialClose()</a>, <a class="el" href="serial_8c_source.html#l00245">serialGet()</a>, <a class="el" href="serial_8c_source.html#l00119">serialInit()</a>, and <a class="el" href="serial_8c_source.html#l00303">serialWrite()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga02e35ec14c8649b89dd91b5155031e2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restoreState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the malloc state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bank</td><td>Location of state to load. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00064">64</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>References <a class="el" href="group__xmem.html#ga8d18204366e8a385c441663ed41f1ae4">__brkval</a>, <a class="el" href="group__xmem.html#gadc2de04ee0c18717273d0ab52fd6dc1b">__flp</a>, <a class="el" href="xmem_8h_source.html#l00075">MallocState::end</a>, <a class="el" href="xmem_8h_source.html#l00077">MallocState::fl</a>, <a class="el" href="xmem_8h_source.html#l00074">MallocState::start</a>, and <a class="el" href="xmem_8h_source.html#l00076">MallocState::val</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    __malloc_heap_start = <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#ab40328f79e021050ac262dc0a6019667" title="Start of Heap.">start</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    __malloc_heap_end = <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#a8fd806ad19b8f5513a4cf18cbf77532c" title="End of Heap.">end</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="group__xmem.html#ga8d18204366e8a385c441663ed41f1ae4" title="Internal Malloc Heap-End Pointer.">__brkval</a> = <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#ab03f36f103bdec81305fd301f1f93885" title="Highest Heap Point.">val</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="group__xmem.html#gadc2de04ee0c18717273d0ab52fd6dc1b" title="Internal Malloc Free List Pointer (State)">__flp</a> = <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#a2cd9ff81854efd20b4a1e414ac69f3dc" title="Free List.">fl</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1b5d7ce361c908dce9af0faf79987124"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the current malloc state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bank</td><td>Current Bank Number </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00054">54</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>References <a class="el" href="group__xmem.html#ga8d18204366e8a385c441663ed41f1ae4">__brkval</a>, <a class="el" href="group__xmem.html#gadc2de04ee0c18717273d0ab52fd6dc1b">__flp</a>, <a class="el" href="xmem_8h_source.html#l00075">MallocState::end</a>, <a class="el" href="xmem_8h_source.html#l00077">MallocState::fl</a>, <a class="el" href="xmem_8h_source.html#l00074">MallocState::start</a>, and <a class="el" href="xmem_8h_source.html#l00076">MallocState::val</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00071">xmemInit()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                             {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#ab40328f79e021050ac262dc0a6019667" title="Start of Heap.">start</a> = __malloc_heap_start;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#a8fd806ad19b8f5513a4cf18cbf77532c" title="End of Heap.">end</a> = __malloc_heap_end;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#ab03f36f103bdec81305fd301f1f93885" title="Highest Heap Point.">val</a> = <a class="code" href="group__xmem.html#ga8d18204366e8a385c441663ed41f1ae4" title="Internal Malloc Heap-End Pointer.">__brkval</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="group__xmem.html#gabe6eb8575dfb63d41e3ca7fe774d1b27" title="MallocState for all Memory Banks.">states</a>[bank].<a class="code" href="struct_malloc_state.html#a2cd9ff81854efd20b4a1e414ac69f3dc" title="Free List.">fl</a> = <a class="code" href="group__xmem.html#gadc2de04ee0c18717273d0ab52fd6dc1b" title="Internal Malloc Free List Pointer (State)">__flp</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga575f63170f6fc636556f8d955cbd42cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t xmemGetBank </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current memory bank. </p>
<dl class="section return"><dt>Returns</dt><dd>Current Memory Bank. </dd></dl>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00104">104</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>References <a class="el" href="xmem_8c_source.html#l00046">currentBank</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                          {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__xmem.html#ga4a1acf2db179d35f089bd00881d1c2eb" title="Current active Memory Bank.">currentBank</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9744de3b2aca21a564b151e770ed7384"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the External Memory Interface. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="flight_8c-example.html#a0">flight.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="xmem_8c_source.html#l00071">71</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>References <a class="el" href="xmem_8h_source.html#l00059">BANK0DDR</a>, <a class="el" href="xmem_8h_source.html#l00060">BANK0PIN</a>, <a class="el" href="xmem_8h_source.html#l00058">BANK0PORT</a>, <a class="el" href="xmem_8h_source.html#l00062">BANK1DDR</a>, <a class="el" href="xmem_8h_source.html#l00063">BANK1PIN</a>, <a class="el" href="xmem_8h_source.html#l00061">BANK1PORT</a>, <a class="el" href="xmem_8h_source.html#l00065">BANK2DDR</a>, <a class="el" href="xmem_8h_source.html#l00066">BANK2PIN</a>, <a class="el" href="xmem_8h_source.html#l00064">BANK2PORT</a>, <a class="el" href="xmem_8h_source.html#l00054">MEMBANKS</a>, and <a class="el" href="xmem_8c_source.html#l00054">saveState()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="group__xmem.html#gafba0bbf9336cfc754622a5e9b3d12d80" title="First Bank Selection Data Direction Register.">BANK0DDR</a> |= (1 &lt;&lt; <a class="code" href="group__xmem.html#gaa176e9b2752f764cd7e7d9fd49d46af8" title="First Bank Selection Pin.">BANK0PIN</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="group__xmem.html#gada13cb9312072b48628763a6e1fd50d3" title="Second Bank Selection Data Direction Register.">BANK1DDR</a> |= (1 &lt;&lt; <a class="code" href="group__xmem.html#gacfebedc2067e3c52e6ae1f627afcc1e1" title="Second Bank Selection Pin.">BANK1PIN</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="group__xmem.html#ga62f56230c5f5f7220c44ab1c93d677ab" title="Third Bank Selection Data Direction Register.">BANK2DDR</a> |= (1 &lt;&lt; <a class="code" href="group__xmem.html#ga74c95f6ccdb5e482e97a5af53ed74229" title="Third Bank Selection Pin.">BANK2PIN</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="group__xmem.html#gabeec1986c81588dde8863b7936028fc9" title="First Bank Selection Port.">BANK0PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#gaa176e9b2752f764cd7e7d9fd49d46af8" title="First Bank Selection Pin.">BANK0PIN</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="group__xmem.html#ga8b3ee7126196f6e939989eae097c3ac4" title="Second Bank Selection Port.">BANK1PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#gacfebedc2067e3c52e6ae1f627afcc1e1" title="Second Bank Selection Pin.">BANK1PIN</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="group__xmem.html#gad35afb0251524c201c2d60f3d035af32" title="Third Bank Selection Port.">BANK2PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#ga74c95f6ccdb5e482e97a5af53ed74229" title="Third Bank Selection Pin.">BANK2PIN</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    XMCRB = 0; <span class="comment">// Use full address space</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    XMCRA = (1 &lt;&lt; SRW11) | (1 &lt;&lt; SRW10); <span class="comment">// 3 Wait cycles</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    XMCRA |= (1 &lt;&lt; SRE); <span class="comment">// Enable XMEM</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3" title="Available Memory Banks.">MEMBANKS</a>; i++) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="group__xmem.html#ga1b5d7ce361c908dce9af0faf79987124" title="Save the current malloc state.">saveState</a>(i);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga619fa66b9f38be684f4331951fc91730"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmemSetBank </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch the active memory bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bank</td><td>New Memory Bank </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00088">88</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>References <a class="el" href="xmem_8h_source.html#l00060">BANK0PIN</a>, <a class="el" href="xmem_8h_source.html#l00058">BANK0PORT</a>, <a class="el" href="xmem_8h_source.html#l00063">BANK1PIN</a>, <a class="el" href="xmem_8h_source.html#l00061">BANK1PORT</a>, <a class="el" href="xmem_8h_source.html#l00066">BANK2PIN</a>, <a class="el" href="xmem_8h_source.html#l00064">BANK2PORT</a>, <a class="el" href="xmem_8c_source.html#l00046">currentBank</a>, <a class="el" href="xmem_8h_source.html#l00054">MEMBANKS</a>, <a class="el" href="xmem_8c_source.html#l00064">restoreState()</a>, and <a class="el" href="xmem_8c_source.html#l00054">saveState()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                               {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (bank &lt; <a class="code" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3" title="Available Memory Banks.">MEMBANKS</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="group__xmem.html#ga1b5d7ce361c908dce9af0faf79987124" title="Save the current malloc state.">saveState</a>(<a class="code" href="group__xmem.html#ga4a1acf2db179d35f089bd00881d1c2eb" title="Current active Memory Bank.">currentBank</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="group__xmem.html#gabeec1986c81588dde8863b7936028fc9" title="First Bank Selection Port.">BANK0PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#gaa176e9b2752f764cd7e7d9fd49d46af8" title="First Bank Selection Pin.">BANK0PIN</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="group__xmem.html#ga8b3ee7126196f6e939989eae097c3ac4" title="Second Bank Selection Port.">BANK1PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#gacfebedc2067e3c52e6ae1f627afcc1e1" title="Second Bank Selection Pin.">BANK1PIN</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="group__xmem.html#gad35afb0251524c201c2d60f3d035af32" title="Third Bank Selection Port.">BANK2PORT</a> &amp;= ~(1 &lt;&lt; <a class="code" href="group__xmem.html#ga74c95f6ccdb5e482e97a5af53ed74229" title="Third Bank Selection Pin.">BANK2PIN</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="group__xmem.html#gabeec1986c81588dde8863b7936028fc9" title="First Bank Selection Port.">BANK0PORT</a> |= ((bank &amp; 0x01) &lt;&lt; <a class="code" href="group__xmem.html#gaa176e9b2752f764cd7e7d9fd49d46af8" title="First Bank Selection Pin.">BANK0PIN</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="group__xmem.html#ga8b3ee7126196f6e939989eae097c3ac4" title="Second Bank Selection Port.">BANK1PORT</a> |= (((bank &amp; 0x02) &gt;&gt; 1) &lt;&lt; <a class="code" href="group__xmem.html#gacfebedc2067e3c52e6ae1f627afcc1e1" title="Second Bank Selection Pin.">BANK1PIN</a>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="group__xmem.html#gad35afb0251524c201c2d60f3d035af32" title="Third Bank Selection Port.">BANK2PORT</a> |= (((bank &amp; 0x04) &gt;&gt; 2) &lt;&lt; <a class="code" href="group__xmem.html#ga74c95f6ccdb5e482e97a5af53ed74229" title="Third Bank Selection Pin.">BANK2PIN</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="group__xmem.html#ga4a1acf2db179d35f089bd00881d1c2eb" title="Current active Memory Bank.">currentBank</a> = bank;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="group__xmem.html#ga02e35ec14c8649b89dd91b5155031e2f" title="Restore the malloc state.">restoreState</a>(bank);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga8d18204366e8a385c441663ed41f1ae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* __brkval</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal Malloc Heap-End Pointer. </p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00064">restoreState()</a>, and <a class="el" href="xmem_8c_source.html#l00054">saveState()</a>.</p>

</div>
</div>
<a class="anchor" id="gadc2de04ee0c18717273d0ab52fd6dc1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* __flp</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal Malloc Free List Pointer (State) </p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00064">restoreState()</a>, and <a class="el" href="xmem_8c_source.html#l00054">saveState()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4a1acf2db179d35f089bd00881d1c2eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t currentBank = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current active Memory Bank. </p>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00046">46</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00104">xmemGetBank()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4a1acf2db179d35f089bd00881d1c2eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t currentBank</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current active Memory Bank. </p>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00046">46</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

<p>Referenced by <a class="el" href="xmem_8c_source.html#l00104">xmemGetBank()</a>, and <a class="el" href="xmem_8c_source.html#l00088">xmemSetBank()</a>.</p>

</div>
</div>
<a class="anchor" id="gabe6eb8575dfb63d41e3ca7fe774d1b27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_malloc_state.html">MallocState</a> states[<a class="el" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3">MEMBANKS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="struct_malloc_state.html" title="All Malloc related State.">MallocState</a> for all Memory Banks. </p>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00045">45</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gabe6eb8575dfb63d41e3ca7fe774d1b27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_malloc_state.html">MallocState</a> states[<a class="el" href="group__xmem.html#ga1ed280cb3dd0a4a03aeda6aaccc180d3">MEMBANKS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="struct_malloc_state.html" title="All Malloc related State.">MallocState</a> for all Memory Banks. </p>

<p>Definition at line <a class="el" href="xmem_8c_source.html#l00045">45</a> of file <a class="el" href="xmem_8c_source.html">xmem.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
