\hypertarget{group__acc}{\section{Accelerometer Driver}
\label{group__acc}\index{Accelerometer Driver@{Accelerometer Driver}}
}


Configuring and reading an L\-S\-M303\-D\-L\-H\-C Accelerometer.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{acc_8h}{acc.\-h}
\begin{DoxyCompactList}\small\item\em L\-S\-M303\-D\-L\-H\-C Accelerometer A\-P\-I Header. \end{DoxyCompactList}\item 
file \hyperlink{acc_8c}{acc.\-c}
\begin{DoxyCompactList}\small\item\em L\-S\-M303\-D\-L\-H\-C Accelerometer A\-P\-I Implementation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__acc_gae81a43863d896c9afe65cc45bf8db9dc}{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1}~0x20
\begin{DoxyCompactList}\small\item\em Accelerometer Control Register 1. \end{DoxyCompactList}\item 
\#define \hyperlink{group__acc_ga4369b46f297623a18b9d937623b7f783}{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4}~0x23
\begin{DoxyCompactList}\small\item\em Accelerometer Control Register 4. \end{DoxyCompactList}\item 
\#define \hyperlink{group__acc_ga9d03f89f2f3ef006967f84157a21075b}{A\-C\-C\-R\-E\-G\-\_\-\-X\-L}~0x28
\begin{DoxyCompactList}\small\item\em First Accelerometer Output Register. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__acc_ga3d56e56c162b045de727006a11880324}{Acc\-Range} \{ \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}{r2\-G}, 
\hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}{r4\-G}, 
\hyperlink{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}{r8\-G}, 
\hyperlink{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}{r16\-G}
 \}
\begin{DoxyCompactList}\small\item\em Accelerometer Range options. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__error_ga2c3e4bb40f36b262a5214e2da2bca9c5}{Error} \hyperlink{group__acc_ga7674eb1b940f183abe5e0b0913a87613}{acc\-Init} (\hyperlink{group__acc_ga3d56e56c162b045de727006a11880324}{Acc\-Range} r)
\begin{DoxyCompactList}\small\item\em Initialize the Accelerometer. \end{DoxyCompactList}\item 
\hyperlink{group__error_ga2c3e4bb40f36b262a5214e2da2bca9c5}{Error} \hyperlink{group__acc_ga4dd55defcab17af4ecc29562a5a28ab3}{acc\-Read} (\hyperlink{struct_vector3f}{Vector3f} $\ast$v)
\begin{DoxyCompactList}\small\item\em Read from the Accelerometer. \end{DoxyCompactList}\item 
\hyperlink{group__error_ga2c3e4bb40f36b262a5214e2da2bca9c5}{Error} \hyperlink{group__acc_ga277bcee14b8033f6da9790a8afe03348}{acc\-Write\-Register} (uint8\-\_\-t reg, uint8\-\_\-t val)
\begin{DoxyCompactList}\small\item\em Write an Accelerometer Register. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__acc_ga3d56e56c162b045de727006a11880324}{Acc\-Range} \hyperlink{group__acc_ga450bb9262f697cdcab7185674b9fc6a3}{acc\-Range}
\begin{DoxyCompactList}\small\item\em Stored range to scale returned values. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Configuring and reading an L\-S\-M303\-D\-L\-H\-C Accelerometer. 

\subsection{Macro Definition Documentation}
\hypertarget{group__acc_gae81a43863d896c9afe65cc45bf8db9dc}{\index{Accelerometer Driver@{Accelerometer Driver}!A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1@{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1}}
\index{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1@{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1~0x20}}\label{group__acc_gae81a43863d896c9afe65cc45bf8db9dc}


Accelerometer Control Register 1. 



Definition at line 49 of file acc.\-c.



Referenced by acc\-Init().

\hypertarget{group__acc_ga4369b46f297623a18b9d937623b7f783}{\index{Accelerometer Driver@{Accelerometer Driver}!A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4@{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4}}
\index{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4@{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4~0x23}}\label{group__acc_ga4369b46f297623a18b9d937623b7f783}


Accelerometer Control Register 4. 



Definition at line 50 of file acc.\-c.



Referenced by acc\-Init().

\hypertarget{group__acc_ga9d03f89f2f3ef006967f84157a21075b}{\index{Accelerometer Driver@{Accelerometer Driver}!A\-C\-C\-R\-E\-G\-\_\-\-X\-L@{A\-C\-C\-R\-E\-G\-\_\-\-X\-L}}
\index{A\-C\-C\-R\-E\-G\-\_\-\-X\-L@{A\-C\-C\-R\-E\-G\-\_\-\-X\-L}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{A\-C\-C\-R\-E\-G\-\_\-\-X\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\-C\-C\-R\-E\-G\-\_\-\-X\-L~0x28}}\label{group__acc_ga9d03f89f2f3ef006967f84157a21075b}


First Accelerometer Output Register. 



Definition at line 51 of file acc.\-c.



Referenced by acc\-Read().



\subsection{Enumeration Type Documentation}
\hypertarget{group__acc_ga3d56e56c162b045de727006a11880324}{\index{Accelerometer Driver@{Accelerometer Driver}!Acc\-Range@{Acc\-Range}}
\index{Acc\-Range@{Acc\-Range}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{Acc\-Range}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Acc\-Range}}}\label{group__acc_ga3d56e56c162b045de727006a11880324}


Accelerometer Range options. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{r2\-G@{r2\-G}!Accelerometer Driver@{Accelerometer Driver}}\index{Accelerometer Driver@{Accelerometer Driver}!r2\-G@{r2\-G}}\item[{\em 
\hypertarget{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}{r2\-G}\label{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}
}]+-\/ 2\-G \index{r4\-G@{r4\-G}!Accelerometer Driver@{Accelerometer Driver}}\index{Accelerometer Driver@{Accelerometer Driver}!r4\-G@{r4\-G}}\item[{\em 
\hypertarget{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}{r4\-G}\label{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}
}]+-\/ 4\-G \index{r8\-G@{r8\-G}!Accelerometer Driver@{Accelerometer Driver}}\index{Accelerometer Driver@{Accelerometer Driver}!r8\-G@{r8\-G}}\item[{\em 
\hypertarget{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}{r8\-G}\label{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}
}]+-\/ 8\-G \index{r16\-G@{r16\-G}!Accelerometer Driver@{Accelerometer Driver}}\index{Accelerometer Driver@{Accelerometer Driver}!r16\-G@{r16\-G}}\item[{\em 
\hypertarget{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}{r16\-G}\label{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}
}]+-\/ 16\-G \end{description}
\end{Desc}


Definition at line 47 of file acc.\-h.


\begin{DoxyCode}
47              \{
48     \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}{r2G}, 
49     \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}{r4G}, 
50     \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}{r8G}, 
51     \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}{r16G}, 
52 \} \hyperlink{group__acc_ga3d56e56c162b045de727006a11880324}{AccRange};
\end{DoxyCode}


\subsection{Function Documentation}
\hypertarget{group__acc_ga7674eb1b940f183abe5e0b0913a87613}{\index{Accelerometer Driver@{Accelerometer Driver}!acc\-Init@{acc\-Init}}
\index{acc\-Init@{acc\-Init}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{acc\-Init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Error} acc\-Init (
\begin{DoxyParamCaption}
\item[{{\bf Acc\-Range}}]{r}
\end{DoxyParamCaption}
)}}\label{group__acc_ga7674eb1b940f183abe5e0b0913a87613}


Initialize the Accelerometer. 

Call before \hyperlink{group__acc_ga4dd55defcab17af4ecc29562a5a28ab3}{acc\-Read()}. I2\-C should already be initialized!


\begin{DoxyParams}{Parameters}
{\em r} & \hyperlink{group__acc_ga3d56e56c162b045de727006a11880324}{Acc\-Range} to use. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{T\-W\-I\-\_\-\-N\-O\-\_\-\-A\-N\-S\-W\-E\-R}, \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{T\-W\-I\-\_\-\-W\-R\-I\-T\-E\-\_\-\-E\-R\-R\-O\-R}, \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a49ccf277a69dd938c591928aa27c66cc}{A\-R\-G\-U\-M\-E\-N\-T\-\_\-\-E\-R\-R\-O\-R} or \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{S\-U\-C\-C\-E\-S\-S}. 
\end{DoxyReturn}


Definition at line 76 of file acc.\-c.



References acc\-Range, A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L1, A\-C\-C\-R\-E\-G\-\_\-\-C\-T\-R\-L4, acc\-Write\-Register(), A\-R\-G\-U\-M\-E\-N\-T\-\_\-\-E\-R\-R\-O\-R, r16\-G, r2\-G, r4\-G, r8\-G, and S\-U\-C\-C\-E\-S\-S.



Referenced by orientation\-Init().


\begin{DoxyCode}
76                           \{
77     uint8\_t v;
78     \textcolor{keywordflow}{switch} (r) \{
79         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}{r2G}:
80             v = 0x00;
81             \textcolor{keywordflow}{break};
82         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}{r4G}:
83             v = 0x10;
84             \textcolor{keywordflow}{break};
85         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}{r8G}:
86             v = 0x20;
87             \textcolor{keywordflow}{break};
88         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}{r16G}:
89             v = 0x30;
90             \textcolor{keywordflow}{break};
91         \textcolor{keywordflow}{default}:
92             \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a49ccf277a69dd938c591928aa27c66cc}{ARGUMENT\_ERROR};
93     \}
94     \hyperlink{group__acc_ga450bb9262f697cdcab7185674b9fc6a3}{accRange} = r;
95     \hyperlink{group__error_ga2c3e4bb40f36b262a5214e2da2bca9c5}{Error} e = \hyperlink{group__acc_ga277bcee14b8033f6da9790a8afe03348}{accWriteRegister}(\hyperlink{group__acc_gae81a43863d896c9afe65cc45bf8db9dc}{ACCREG\_CTRL1}, 0x57); \textcolor{comment}{// Enable all axes,
       100Hz}
96     \textcolor{keywordflow}{if} (e != \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{SUCCESS}) \{
97         \textcolor{keywordflow}{return} e;
98     \}
99     e = \hyperlink{group__acc_ga277bcee14b8033f6da9790a8afe03348}{accWriteRegister}(\hyperlink{group__acc_ga4369b46f297623a18b9d937623b7f783}{ACCREG\_CTRL4}, v);
100     \textcolor{keywordflow}{return} e;
101 \}
\end{DoxyCode}
\hypertarget{group__acc_ga4dd55defcab17af4ecc29562a5a28ab3}{\index{Accelerometer Driver@{Accelerometer Driver}!acc\-Read@{acc\-Read}}
\index{acc\-Read@{acc\-Read}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{acc\-Read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Error} acc\-Read (
\begin{DoxyParamCaption}
\item[{{\bf Vector3f} $\ast$}]{v}
\end{DoxyParamCaption}
)}}\label{group__acc_ga4dd55defcab17af4ecc29562a5a28ab3}


Read from the Accelerometer. 

Accelerometer should already be initialized! 
\begin{DoxyParams}{Parameters}
{\em v} & \hyperlink{struct_vector3f}{Vector3f} for the read values \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{T\-W\-I\-\_\-\-N\-O\-\_\-\-A\-N\-S\-W\-E\-R}, \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{T\-W\-I\-\_\-\-W\-R\-I\-T\-E\-\_\-\-E\-R\-R\-O\-R}, \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a49ccf277a69dd938c591928aa27c66cc}{A\-R\-G\-U\-M\-E\-N\-T\-\_\-\-E\-R\-R\-O\-R} or \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{S\-U\-C\-C\-E\-S\-S}. 
\end{DoxyReturn}
\begin{Desc}
\item[Examples\-: ]\par
\hyperlink{hardware_test_8c-example}{hardware\-Test.\-c}.\end{Desc}


Definition at line 103 of file acc.\-c.



References A\-C\-C\-\_\-\-A\-D\-D\-R\-E\-S\-S, A\-C\-C\-F\-I\-L\-T\-E\-R\-F\-A\-C\-T\-O\-R, acc\-Range, A\-C\-C\-R\-E\-G\-\_\-\-X\-L, A\-R\-G\-U\-M\-E\-N\-T\-\_\-\-E\-R\-R\-O\-R, r16\-G, r2\-G, r4\-G, r8\-G, S\-U\-C\-C\-E\-S\-S, T\-W\-I\-\_\-\-N\-O\-\_\-\-A\-N\-S\-W\-E\-R, T\-W\-I\-\_\-\-R\-E\-A\-D, T\-W\-I\-\_\-\-W\-R\-I\-T\-E, T\-W\-I\-\_\-\-W\-R\-I\-T\-E\-\_\-\-E\-R\-R\-O\-R, twi\-Read\-Ack(), twi\-Read\-Nak(), twi\-Rep\-Start(), twi\-Start(), twi\-Write(), Vector3f\-::x, Vector3f\-::y, and Vector3f\-::z.



Referenced by orientation\-Task().


\begin{DoxyCode}
103                            \{
104     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accSumX = 0; \textcolor{comment}{/* Buffer for X Low-Pass. */}
105     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accSumY = 0; \textcolor{comment}{/* Buffer for Y Low-Pass. */}
106     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accSumZ = 0; \textcolor{comment}{/* Buffer for Z Low-Pass. */}
107     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accFilterX = 0; \textcolor{comment}{/* Buffer for X Low-Pass. */}
108     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accFilterY = 0; \textcolor{comment}{/* Buffer for Y Low-Pass. */}
109     \textcolor{keyword}{static} \textcolor{keywordtype}{double} accFilterZ = 0; \textcolor{comment}{/* Buffer for Z Low-Pass. */}
110 
111     \textcolor{keywordflow}{if} (v == NULL) \{
112         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a49ccf277a69dd938c591928aa27c66cc}{ARGUMENT\_ERROR};
113     \}
114     \textcolor{keywordflow}{if} (\hyperlink{group__twi_ga4f86edc73f37ce976ea2225519ab31cd}{twiStart}(\hyperlink{group__config_ga27341a8e1cb1a6ace5a5cf3caea1c99f}{ACC\_ADDRESS} | \hyperlink{group__twi_ga3b68e8e777b71520f9dbfac733774d5f}{TWI\_WRITE})) \{
115         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{TWI\_NO\_ANSWER};
116     \}
117     \textcolor{keywordflow}{if} (\hyperlink{group__twi_gaf42e50aaf4a9794d3a2c000e7b407887}{twiWrite}(\hyperlink{group__acc_ga9d03f89f2f3ef006967f84157a21075b}{ACCREG\_XL} | (1 << 7))) \{ \textcolor{comment}{// Auto Increment}
118         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{TWI\_WRITE\_ERROR};
119     \}
120     \textcolor{keywordflow}{if} (\hyperlink{group__twi_ga996e3cbbbb7239e2278bd286e61f0791}{twiRepStart}(\hyperlink{group__config_ga27341a8e1cb1a6ace5a5cf3caea1c99f}{ACC\_ADDRESS} | \hyperlink{group__twi_gaaf9a8abccd811954f9cc316f2b2f87b3}{TWI\_READ})) \{
121         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{TWI\_NO\_ANSWER};
122     \}
123 
124     uint8\_t xl = \hyperlink{group__twi_ga0ab816bd0abcc24d6817f8395de7eafd}{twiReadAck}();
125     uint8\_t xh = \hyperlink{group__twi_ga0ab816bd0abcc24d6817f8395de7eafd}{twiReadAck}();
126     uint8\_t yl = \hyperlink{group__twi_ga0ab816bd0abcc24d6817f8395de7eafd}{twiReadAck}();
127     uint8\_t yh = \hyperlink{group__twi_ga0ab816bd0abcc24d6817f8395de7eafd}{twiReadAck}();
128     uint8\_t zl = \hyperlink{group__twi_ga0ab816bd0abcc24d6817f8395de7eafd}{twiReadAck}();
129     uint8\_t zh = \hyperlink{group__twi_ga5fad19b3784aeaa9ae995e64f9e965b8}{twiReadNak}();
130 
131     int16\_t x = *(int8\_t *)(&xh);
132     x *= (1 << 8);
133     x |= xl;
134 
135     int16\_t y = *(int8\_t *)(&yh);
136     y *= (1 << 8);
137     y |= yl;
138 
139     int16\_t z = *(int8\_t *)(&zh);
140     z *= (1 << 8);
141     z |= zl;
142 
143     \textcolor{keywordflow}{switch} (\hyperlink{group__acc_ga450bb9262f697cdcab7185674b9fc6a3}{accRange}) \{
144         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a4a2974e8d1854463238577802e1253f4}{r2G}:
145             v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x} = (((double)x) * 2 / 0x8000);
146             v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y} = (((double)y) * 2 / 0x8000);
147             v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z} = (((double)z) * 2 / 0x8000);
148             \textcolor{keywordflow}{break};
149         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324a9b1fcfa48172993a069412d5eecd6689}{r4G}:
150             v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x} = (((double)x) * 4 / 0x8000);
151             v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y} = (((double)y) * 4 / 0x8000);
152             v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z} = (((double)z) * 4 / 0x8000);
153             \textcolor{keywordflow}{break};
154         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324ac131fa2bab37bb0c8e152a91ce2b6bcf}{r8G}:
155             v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x} = (((double)x) * 8 / 0x8000);
156             v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y} = (((double)y) * 8 / 0x8000);
157             v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z} = (((double)z) * 8 / 0x8000);
158             \textcolor{keywordflow}{break};
159         \textcolor{keywordflow}{case} \hyperlink{group__acc_gga3d56e56c162b045de727006a11880324af3fee93850514c5235659c573611f183}{r16G}:
160             v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x} = (((double)x) * 16 / 0x8000);
161             v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y} = (((double)y) * 16 / 0x8000);
162             v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z} = (((double)z) * 16 / 0x8000);
163             \textcolor{keywordflow}{break};
164         \textcolor{keywordflow}{default}:
165             \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a49ccf277a69dd938c591928aa27c66cc}{ARGUMENT\_ERROR};
166     \}
167 
168     accSumX = accSumX - accFilterX + v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x};
169     accFilterX = accSumX / \hyperlink{group__config_gaace41596724b03f3f2b2ee28b7e87272}{ACCFILTERFACTOR};
170     v->\hyperlink{struct_vector3f_af88b946fb90d5f08b5fb740c70e98c10}{x} = accFilterX;
171 
172     accSumY = accSumY - accFilterY + v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y};
173     accFilterY = accSumY / \hyperlink{group__config_gaace41596724b03f3f2b2ee28b7e87272}{ACCFILTERFACTOR};
174     v->\hyperlink{struct_vector3f_ab927965981178aa1fba979a37168db2a}{y} = accFilterY;
175 
176     accSumZ = accSumZ - accFilterZ + v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z};
177     accFilterZ = accSumZ / \hyperlink{group__config_gaace41596724b03f3f2b2ee28b7e87272}{ACCFILTERFACTOR};
178     v->\hyperlink{struct_vector3f_ab3e6ed577a7c669c19de1f9c1b46c872}{z} = accFilterZ;
179 
180     \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{SUCCESS};
181 \}
\end{DoxyCode}
\hypertarget{group__acc_ga277bcee14b8033f6da9790a8afe03348}{\index{Accelerometer Driver@{Accelerometer Driver}!acc\-Write\-Register@{acc\-Write\-Register}}
\index{acc\-Write\-Register@{acc\-Write\-Register}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{acc\-Write\-Register}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Error} acc\-Write\-Register (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{val}
\end{DoxyParamCaption}
)}}\label{group__acc_ga277bcee14b8033f6da9790a8afe03348}


Write an Accelerometer Register. 

I2\-C should aready be initialized!


\begin{DoxyParams}{Parameters}
{\em reg} & Register Address \\
\hline
{\em val} & New Value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{T\-W\-I\-\_\-\-N\-O\-\_\-\-A\-N\-S\-W\-E\-R}, \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{T\-W\-I\-\_\-\-W\-R\-I\-T\-E\-\_\-\-E\-R\-R\-O\-R} or \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{S\-U\-C\-C\-E\-S\-S}. 
\end{DoxyReturn}


Definition at line 62 of file acc.\-c.



References T\-W\-I\-\_\-\-N\-O\-\_\-\-A\-N\-S\-W\-E\-R.



Referenced by acc\-Init().


\begin{DoxyCode}
62                                                  \{
63     \textcolor{keywordflow}{if} (\hyperlink{group__twi_ga4f86edc73f37ce976ea2225519ab31cd}{twiStart}(\hyperlink{group__config_ga27341a8e1cb1a6ace5a5cf3caea1c99f}{ACC\_ADDRESS} | \hyperlink{group__twi_ga3b68e8e777b71520f9dbfac733774d5f}{TWI\_WRITE})) \{
64         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5a04d5943ba652af2205c88b247e0c659c}{TWI\_NO\_ANSWER};
65     \}
66     \textcolor{keywordflow}{if} (\hyperlink{group__twi_gaf42e50aaf4a9794d3a2c000e7b407887}{twiWrite}(reg)) \{
67         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{TWI\_WRITE\_ERROR};
68     \}
69     \textcolor{keywordflow}{if} (\hyperlink{group__twi_gaf42e50aaf4a9794d3a2c000e7b407887}{twiWrite}(val)) \{
70         \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac0e3b3463dcaf220e54794b4711708c9}{TWI\_WRITE\_ERROR};
71     \}
72     \hyperlink{group__twi_gabf581270e9537a60e2d8cf3d2c1543d1}{twiStop}();
73     \textcolor{keywordflow}{return} \hyperlink{group__error_gga2c3e4bb40f36b262a5214e2da2bca9c5ac7f69f7c9e5aea9b8f54cf02870e2bf8}{SUCCESS};
74 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{group__acc_ga450bb9262f697cdcab7185674b9fc6a3}{\index{Accelerometer Driver@{Accelerometer Driver}!acc\-Range@{acc\-Range}}
\index{acc\-Range@{acc\-Range}!Accelerometer Driver@{Accelerometer Driver}}
\subsubsection[{acc\-Range}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Acc\-Range} acc\-Range}}\label{group__acc_ga450bb9262f697cdcab7185674b9fc6a3}


Stored range to scale returned values. 



Definition at line 53 of file acc.\-c.



Referenced by acc\-Init(), and acc\-Read().

