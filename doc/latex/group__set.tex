\hypertarget{group__set}{\section{Motor Speed Mixer}
\label{group__set}\index{Motor Speed Mixer@{Motor Speed Mixer}}
}


Takes the Base Speed and P\-I\-D-\/\-Output and sets Motor Speed accordingly.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{set_8h}{set.\-h}
\begin{DoxyCompactList}\small\item\em Motor Mixer Library Header. \end{DoxyCompactList}\item 
file \hyperlink{set_8c}{set.\-c}
\begin{DoxyCompactList}\small\item\em Motor Mixer Library Implementation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__set_ga37f245c493d725009017f62a78505e64}{set\-Task} (void)
\begin{DoxyCompactList}\small\item\em Read the P\-I\-D Output and Set the Motor Speeds. \end{DoxyCompactList}\item 
void \hyperlink{group__set_ga4173baf06c19647e0c60ef2e910bbc87}{set\-Motor\-Speeds} (uint8\-\_\-t axis, uint8\-\_\-t $\ast$vals)
\begin{DoxyCompactList}\small\item\em Set the Motor Speeds according to the S\-E\-T\-\_\-$\ast$ Motor Position Constants. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\-\_\-t \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{base\-Speed}
\begin{DoxyCompactList}\small\item\em Motor Base Speed. \end{DoxyCompactList}\item 
uint8\-\_\-t \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{base\-Speed} = 0
\begin{DoxyCompactList}\small\item\em Motor Base Speed. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Takes the Base Speed and P\-I\-D-\/\-Output and sets Motor Speed accordingly. 

\subsection{Function Documentation}
\hypertarget{group__set_ga4173baf06c19647e0c60ef2e910bbc87}{\index{Motor Speed Mixer@{Motor Speed Mixer}!set\-Motor\-Speeds@{set\-Motor\-Speeds}}
\index{set\-Motor\-Speeds@{set\-Motor\-Speeds}!Motor Speed Mixer@{Motor Speed Mixer}}
\subsubsection[{set\-Motor\-Speeds}]{\setlength{\rightskip}{0pt plus 5cm}void set\-Motor\-Speeds (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{axis, }
\item[{uint8\-\_\-t $\ast$}]{vals}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{group__set_ga4173baf06c19647e0c60ef2e910bbc87}


Set the Motor Speeds according to the S\-E\-T\-\_\-$\ast$ Motor Position Constants. 


\begin{DoxyParams}{Parameters}
{\em axis} & R\-O\-L\-L or P\-I\-T\-C\-H \\
\hline
{\em vals} & Speeds for the two Motors on this axis (+, -\/) \\
\hline
\end{DoxyParams}


Definition at line 57 of file set.\-c.



References motor\-Set(), P\-I\-T\-C\-H, R\-O\-L\-L, S\-E\-T\-\_\-\-P\-I\-T\-C\-H\-M\-I\-N\-U\-S, S\-E\-T\-\_\-\-P\-I\-T\-C\-H\-P\-L\-U\-S, S\-E\-T\-\_\-\-R\-O\-L\-L\-M\-I\-N\-U\-S, and S\-E\-T\-\_\-\-R\-O\-L\-L\-P\-L\-U\-S.



Referenced by set\-Task().


\begin{DoxyCode}
57                                                         \{
58     \textcolor{keywordflow}{if} (axis == \hyperlink{group__pid_gaf902416f65138704a180dbae2dc9d8f2}{ROLL}) \{
59         \hyperlink{group__motor_gafde1750cdf4354c295108eec552d899d}{motorSet}(\hyperlink{group__config_ga460dbe0039d252579c5ce8beef7cc709}{SET\_ROLLPLUS}, vals[0]);
60         \hyperlink{group__motor_gafde1750cdf4354c295108eec552d899d}{motorSet}(\hyperlink{group__config_ga9921670161925a1d7b946aeb65d5767a}{SET\_ROLLMINUS}, vals[1]);
61     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (axis == \hyperlink{group__pid_gacd633835a520a62245ec6cfeb6d00e97}{PITCH}) \{
62         \hyperlink{group__motor_gafde1750cdf4354c295108eec552d899d}{motorSet}(\hyperlink{group__config_gaf0a00d922db66d875ca53f6db34e7307}{SET\_PITCHPLUS}, vals[0]);
63         \hyperlink{group__motor_gafde1750cdf4354c295108eec552d899d}{motorSet}(\hyperlink{group__config_ga8c969dbb07dc504226fc2c69484b9768}{SET\_PITCHMINUS}, vals[1]);
64     \}
65 \}
\end{DoxyCode}
\hypertarget{group__set_ga37f245c493d725009017f62a78505e64}{\index{Motor Speed Mixer@{Motor Speed Mixer}!set\-Task@{set\-Task}}
\index{set\-Task@{set\-Task}!Motor Speed Mixer@{Motor Speed Mixer}}
\subsubsection[{set\-Task}]{\setlength{\rightskip}{0pt plus 5cm}void set\-Task (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group__set_ga37f245c493d725009017f62a78505e64}


Read the P\-I\-D Output and Set the Motor Speeds. 

\begin{Desc}
\item[Examples\-: ]\par
\hyperlink{uart_flight_8c-example}{uart\-Flight.\-c}.\end{Desc}


Definition at line 67 of file set.\-c.



References base\-Speed, pid\-Output, and set\-Motor\-Speeds().


\begin{DoxyCode}
67                    \{
68     \textcolor{keywordflow}{for} (uint8\_t i = 0; i < 2; i++) \{
69         uint8\_t diff = \hyperlink{group__pid_ga5b70790e470e0c5812d24a8a098c01e0}{pidOutput}[i];
70         \textcolor{keywordflow}{if} (diff > \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{baseSpeed}) \{
71             diff = \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{baseSpeed}; \textcolor{comment}{// Limit PID}
72         \}
73         uint8\_t v[2] = \{ \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{baseSpeed} + diff, \hyperlink{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{baseSpeed} - diff \};
74         \hyperlink{group__set_ga4173baf06c19647e0c60ef2e910bbc87}{setMotorSpeeds}(i, v);
75     \}
76 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{\index{Motor Speed Mixer@{Motor Speed Mixer}!base\-Speed@{base\-Speed}}
\index{base\-Speed@{base\-Speed}!Motor Speed Mixer@{Motor Speed Mixer}}
\subsubsection[{base\-Speed}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t base\-Speed}}\label{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}


Motor Base Speed. 

\begin{Desc}
\item[Examples\-: ]\par
\hyperlink{uart_flight_8c-example}{uart\-Flight.\-c}.\end{Desc}


Definition at line 51 of file set.\-c.



Referenced by set\-Task().

\hypertarget{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}{\index{Motor Speed Mixer@{Motor Speed Mixer}!base\-Speed@{base\-Speed}}
\index{base\-Speed@{base\-Speed}!Motor Speed Mixer@{Motor Speed Mixer}}
\subsubsection[{base\-Speed}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t base\-Speed = 0}}\label{group__set_gab2b0c78a81e045d7a8f28be307b8c61b}


Motor Base Speed. 



Definition at line 51 of file set.\-c.



Referenced by set\-Task().

